(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0109eead"],{"04d1":function(t,e,r){var a=r("342f"),n=a.match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},"25f0":function(t,e,r){"use strict";var a=r("e330"),n=r("5e77").PROPER,i=r("6eeb"),u=r("825a"),c=r("3a9b"),o=r("577e"),s=r("d039"),h=r("ad6d"),f="toString",l=RegExp.prototype,p=l[f],d=a(h),b=s((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),m=n&&p.name!=f;(b||m)&&i(RegExp.prototype,f,(function(){var t=u(this),e=o(t.source),r=t.flags,a=o(void 0===r&&c(l,t)&&!("flags"in l)?d(t):r);return"/"+e+"/"+a}),{unsafe:!0})},"408a":function(t,e,r){var a=r("e330");t.exports=a(1..valueOf)},"4de4":function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").filter,i=r("1dde"),u=i("filter");a({target:"Array",proto:!0,forced:!u},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"4e82":function(t,e,r){"use strict";var a=r("23e7"),n=r("e330"),i=r("59ed"),u=r("7b0b"),c=r("07fa"),o=r("577e"),s=r("d039"),h=r("addb"),f=r("a640"),l=r("04d1"),p=r("d998"),d=r("2d00"),b=r("512c"),m=[],v=n(m.sort),O=n(m.push),j=s((function(){m.sort(void 0)})),g=s((function(){m.sort(null)})),S=f("sort"),D=!s((function(){if(d)return d<70;if(!(l&&l>3)){if(p)return!0;if(b)return b<603;var t,e,r,a,n="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(a=0;a<47;a++)m.push({k:e+a,v:r})}for(m.sort((function(t,e){return e.v-t.v})),a=0;a<m.length;a++)e=m[a].k.charAt(0),n.charAt(n.length-1)!==e&&(n+=e);return"DGBEFHACIJK"!==n}})),y=j||!g||!S||!D,N=function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:o(e)>o(r)?1:-1}};a({target:"Array",proto:!0,forced:y},{sort:function(t){void 0!==t&&i(t);var e=u(this);if(D)return void 0===t?v(e):v(e,t);var r,a,n=[],o=c(e);for(a=0;a<o;a++)a in e&&O(n,e[a]);h(n,N(t)),r=n.length,a=0;while(a<r)e[a]=n[a++];while(a<o)delete e[a++];return e}})},"512c":function(t,e,r){var a=r("342f"),n=a.match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var a=r("e330"),n=r("1d80"),i=r("577e"),u=r("5899"),c=a("".replace),o="["+u+"]",s=RegExp("^"+o+o+"*"),h=RegExp(o+o+"*$"),f=function(t){return function(e){var r=i(n(e));return 1&t&&(r=c(r,s,"")),2&t&&(r=c(r,h,"")),r}};t.exports={start:f(1),end:f(2),trim:f(3)}},7156:function(t,e,r){var a=r("1626"),n=r("861d"),i=r("d2bb");t.exports=function(t,e,r){var u,c;return i&&a(u=e.constructor)&&u!==r&&n(c=u.prototype)&&c!==r.prototype&&i(t,c),t}},"810e":function(t,e,r){"use strict";r.r(e);r("b64b");var a=r("7a23"),n={id:"App"},i={class:"traffic"},u={class:"container"},c=Object(a["h"])("p",{class:"hint"},"*每隔 15 秒自動更新",-1),o={class:"bus_route"},s={key:0};function h(t,e,r,h,f,l){var p=Object(a["z"])("SelectArea");return Object(a["u"])(),Object(a["g"])("div",n,[Object(a["h"])("main",i,[Object(a["j"])(p,{onSearchData:l.getSearchData,onCurrentDirection:l.getCurrentDirection,routeStatus:f.routeStatus,isLoading:f.isLoading},null,8,["onSearchData","onCurrentDirection","routeStatus","isLoading"]),Object(a["h"])("div",u,[c,Object(a["h"])("div",o,[Object.keys(l.tmpDirectionData).length?Object(a["f"])("",!0):(Object(a["u"])(),Object(a["g"])("p",s,"請選擇公車路線")),f.isLoading?(Object(a["u"])(),Object(a["g"])("ul",{key:1,class:"busArriveStatus",style:Object(a["q"])({Minheight:60*l.tmpDirectionData.Stops.length+"px"})},[(Object(a["u"])(!0),Object(a["g"])(a["a"],null,Object(a["y"])(l.tmpDirectionData.Stops,(function(t,e){return Object(a["u"])(),Object(a["g"])("li",{key:e},[Object(a["h"])("div",{class:Object(a["p"])(["busArriveStatus_time",{noDeparture:1==t.StopStatus||void 0==t.StopStatus,arriving:5==t.StopStatus,willArriving:6==t.StopStatus}])},Object(a["B"])(l.calculateArrivalTime(t.EstimateTime)?l.calculateArrivalTime(t.EstimateTime):l.displayArrivalStatus(t.StopStatus)),3),Object(a["h"])("p",null,Object(a["B"])(t.StopName.Zh_tw),1)])})),128))],4)):Object(a["f"])("",!0)])])])])}var f=r("b85c"),l=(r("d3b7"),r("4de4"),r("4e82"),r("25f0"),{class:"selectArea"}),p={class:"selectArea_container"},d=Object(a["h"])("option",{value:""},"選擇縣市",-1),b=["value"],m=Object(a["h"])("option",{value:""},"選擇路線",-1),v=["value"],O=Object(a["h"])("i",{class:"fas fa-search"},null,-1),j=[O],g={key:0,class:"tab"},S={key:0},D={key:0},y={key:1},N=Object(a["i"])("往"),A={key:1},R={key:0},T={key:1},w=Object(a["i"])("往");function C(t,e,r,n,i,u){return Object(a["u"])(),Object(a["g"])(a["a"],null,[Object(a["h"])("div",l,[Object(a["h"])("div",p,[Object(a["H"])(Object(a["h"])("select",{class:"selection","onUpdate:modelValue":e[0]||(e[0]=function(t){return i.currentCity=t})},[d,(Object(a["u"])(!0),Object(a["g"])(a["a"],null,Object(a["y"])(t.citySelection,(function(t,e){return Object(a["u"])(),Object(a["g"])("option",{key:e,value:t.value},Object(a["B"])(t.title),9,b)})),128))],512),[[a["D"],i.currentCity]]),Object(a["H"])(Object(a["h"])("select",{class:"selection","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.currentRoute=t})},[m,(Object(a["u"])(!0),Object(a["g"])(a["a"],null,Object(a["y"])(i.busRouteGroup,(function(t,e){return Object(a["u"])(),Object(a["g"])("option",{key:e,value:t},Object(a["B"])(t),9,v)})),128))],512),[[a["D"],i.currentRoute]]),Object(a["h"])("button",{class:"btn icon_btn",onClick:e[2]||(e[2]=function(){return u.searchRoute&&u.searchRoute.apply(u,arguments)})},j)])]),r.isLoading?(Object(a["u"])(),Object(a["g"])("div",g,[Object(a["h"])("ul",null,[1==r.routeStatus||2==r.routeStatus?(Object(a["u"])(),Object(a["g"])("li",S,[Object(a["h"])("a",{href:"#",class:Object(a["p"])({active:"departure"==i.status}),onClick:e[3]||(e[3]=Object(a["I"])((function(t){return u.selectTab("departure")}),["prevent"]))},[i.departureStop?(Object(a["u"])(),Object(a["g"])("p",y,[N,Object(a["h"])("span",null,Object(a["B"])(i.departureStop),1)])):(Object(a["u"])(),Object(a["g"])("p",D,"起站"))],2)])):Object(a["f"])("",!0),1==r.routeStatus||3==r.routeStatus?(Object(a["u"])(),Object(a["g"])("li",A,[Object(a["h"])("a",{href:"#",class:Object(a["p"])({active:"destination"==i.status}),onClick:e[4]||(e[4]=Object(a["I"])((function(t){return u.selectTab("destination")}),["prevent"]))},[i.destinationStop?(Object(a["u"])(),Object(a["g"])("p",T,[w,Object(a["h"])("span",null,Object(a["B"])(i.destinationStop),1)])):(Object(a["u"])(),Object(a["g"])("p",R,"迄站"))],2)])):Object(a["f"])("",!0)])])):Object(a["f"])("",!0)],64)}r("a9e3"),r("d81d");var E=r("2708"),k={props:{routeStatus:Number,isLoading:Boolean},mixins:[E["a"]],data:function(){return{currentCity:"",currentRoute:"",busRouteGroup:[],routeRealTimeData:[],departureStop:"",destinationStop:"",status:"departure"}},computed:{searchData:function(){return{currentCity:this.currentCity,currentRoute:this.currentRoute}}},watch:{currentCity:function(t){var e=this;this.busRouteGroup=[],fetch("https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/"+this.currentCity+"?$select=RouteName&$format=JSON",{headers:this.GetAuthorizationHeader()}).then((function(t){return t.json()})).then((function(t){t.map((function(t){e.busRouteGroup.push(t.RouteName.Zh_tw)}))}))},routeStatus:function(){3===this.routeStatus&&(this.status="departure")}},methods:{searchRoute:function(){var t=this;fetch("https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/"+this.currentCity+"/"+this.searchData.currentRoute+"?$filter=RouteName%2FZh_tw%20eq%20'"+this.searchData.currentRoute+"'&$format=JSON",{headers:this.GetAuthorizationHeader()}).then((function(t){return t.json()})).then((function(e){t.departureStop=e[0].DepartureStopNameZh,t.destinationStop=e[0].DestinationStopNameZh,t.status="departure",t.$emit("searchData",t.searchData)}))},selectTab:function(t){this.status=t,this.$emit("currentDirection",this.status)}},emits:{searchData:Object,currentDirection:Object}},I=r("6b0d"),x=r.n(I);const _=x()(k,[["render",C]]);var B=_,M={mixins:[E["a"]],data:function(){return{location:[{title:"臺南",cityName:"臺南市"},{title:"高雄",cityName:"高雄市"},{title:"屏東",cityName:"屏東縣"},{title:"宜蘭",cityName:"宜蘭縣"},{title:"花蓮",cityName:"花蓮縣"},{title:"台東",cityName:"臺東縣"},{title:"金門馬祖.澎湖",cityName:["金門縣","澎湖縣","連江縣"]}],searchData:[],busStopSequence:[],routeData:[],deaprtureData:[],returnData:[],currentDirection:"departure",routeStatus:0,isLoading:!1,timer:void 0}},components:{SelectArea:B},watch:{searchData:function(){var t=this;fetch("https://ptx.transportdata.tw/MOTC/v2/Bus/StopOfRoute/City/"+this.searchData.currentCity+"/"+this.searchData.currentRoute+"?$filter=RouteName%2FZh_tw%20eq%20'"+this.searchData.currentRoute+"'&$format=JSON",{headers:this.GetAuthorizationHeader()}).then((function(t){return t.json()})).then((function(e){try{t.deaprtureData=e.filter((function(t){return 1===t.Direction})),t.returnData=e.filter((function(t){return 0===t.Direction}))}catch(n){return}t.deaprtureData=t.deaprtureData.length>0?t.deaprtureData[0]:"",t.returnData=t.returnData.length>0?t.returnData[0]:"";var r=Boolean(t.deaprtureData),a=Boolean(t.returnData);t.routeStatus=r||r?r&&a?1:r?2:3:0}))}},computed:{tmpDirectionData:function(){return this.getArrivalTimeData(this.currentDirection),"departure"===this.currentDirection?this.deaprtureData:this.returnData}},methods:{getSearchData:function(t){this.searchData=t},getCurrentDirection:function(t){this.currentDirection=t},getArrivalTimeData:function(t){var e=this,r="departure"===t?0:1;this.timer&&clearInterval(this.timer),void 0!==this.searchData.currentCity&&void 0!==this.tmpDirectionData&&(fetch("https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/City/"+this.searchData.currentCity+"/"+this.searchData.currentRoute+"?$filter=RouteName%2FZh_tw%20eq%20'"+this.searchData.currentRoute+"'&$format=JSON",{headers:this.GetAuthorizationHeader()}).then((function(t){return t.json()})).then((function(t){t=t.sort((function(t,e){return e.EstimateTime-t.EstimateTime}));var a,n=t.filter((function(t){return t.Direction===r})),i=Object(f["a"])(e.tmpDirectionData.Stops);try{for(i.s();!(a=i.n()).done;){var u,c=a.value,o=Object(f["a"])(n);try{for(o.s();!(u=o.n()).done;){var s=u.value;if(c.StopName.Zh_tw===s.StopName.Zh_tw){if(c.StopStatus=s.StopStatus,c.EstimateTime=s.EstimateTime,s.EstimateTime<30){c.StopStatus=5,c.EstimateTime="";continue}s.EstimateTime<180&&(c.StopStatus=6,c.EstimateTime="")}}}catch(h){o.e(h)}finally{o.f()}}}catch(h){i.e(h)}finally{i.f()}e.isLoading=!0})),this.timer=setInterval((function(){e.getArrivalTimeData()}),15e3))},displayArrivalStatus:function(t){switch(t){case 0:return"正常";case 1:return"未發車";case 2:return"交管不停靠";case 3:return"末班車已過";case 4:return"今日未營運";case 5:return"進站中";case 6:return"將到站";default:return"未發車"}},calculateArrivalTime:function(t){if(t){var e=new Date,r={},a={};return r.hours=e.getHours(),r.miuntes=e.getMinutes(),r.seconds=e.getSeconds(),a.seconds=(r.seconds+t)%60,a.minutes=r.miuntes+Math.floor((r.seconds+t)/60),a.hours=r.hours+parseInt(a.minutes/60),a.hours=1===a.hours.toString().length?"0"+a.hours.toString():a.hours.toString(),a.minutes=1===a.minutes.toString().length?"0"+a.minutes.toString():a.minutes.toString(),a.hours+":"+a.minutes}}}};const G=x()(M,[["render",h]]);e["default"]=G},a640:function(t,e,r){"use strict";var a=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&a((function(){r.call(null,e||function(){throw 1},1)}))}},a9e3:function(t,e,r){"use strict";var a=r("83ab"),n=r("da84"),i=r("e330"),u=r("94ca"),c=r("6eeb"),o=r("1a2d"),s=r("7156"),h=r("3a9b"),f=r("d9b5"),l=r("c04e"),p=r("d039"),d=r("241c").f,b=r("06cf").f,m=r("9bf2").f,v=r("408a"),O=r("58a8").trim,j="Number",g=n[j],S=g.prototype,D=n.TypeError,y=i("".slice),N=i("".charCodeAt),A=function(t){var e=l(t,"number");return"bigint"==typeof e?e:R(e)},R=function(t){var e,r,a,n,i,u,c,o,s=l(t,"number");if(f(s))throw D("Cannot convert a Symbol value to a number");if("string"==typeof s&&s.length>2)if(s=O(s),e=N(s,0),43===e||45===e){if(r=N(s,2),88===r||120===r)return NaN}else if(48===e){switch(N(s,1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+s}for(i=y(s,2),u=i.length,c=0;c<u;c++)if(o=N(i,c),o<48||o>n)return NaN;return parseInt(i,a)}return+s};if(u(j,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var T,w=function(t){var e=arguments.length<1?0:g(A(t)),r=this;return h(S,r)&&p((function(){v(r)}))?s(Object(e),r,w):e},C=a?d(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),E=0;C.length>E;E++)o(g,T=C[E])&&!o(w,T)&&m(w,T,b(g,T));w.prototype=S,S.constructor=w,c(n,j,w)}},addb:function(t,e,r){var a=r("f36a"),n=Math.floor,i=function(t,e){var r=t.length,o=n(r/2);return r<8?u(t,e):c(t,i(a(t,0,o),e),i(a(t,o),e),e)},u=function(t,e){var r,a,n=t.length,i=1;while(i<n){a=i,r=t[i];while(a&&e(t[a-1],r)>0)t[a]=t[--a];a!==i++&&(t[a]=r)}return t},c=function(t,e,r,a){var n=e.length,i=r.length,u=0,c=0;while(u<n||c<i)t[u+c]=u<n&&c<i?a(e[u],r[c])<=0?e[u++]:r[c++]:u<n?e[u++]:r[c++];return t};t.exports=i},d81d:function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").map,i=r("1dde"),u=i("map");a({target:"Array",proto:!0,forced:!u},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},d998:function(t,e,r){var a=r("342f");t.exports=/MSIE|Trident/.test(a)}}]);
//# sourceMappingURL=chunk-0109eead.80af15ab.js.map